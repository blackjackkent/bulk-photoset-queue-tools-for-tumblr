(()=>{"use strict";window.addEventListener("load",(async()=>{const t=new class{constructor(){this.cssMap={},this.blogShortname=null,this.blogUuid=null}async init(){this.cssMap=await window.tumblr.getCssMap(),await this.fetchBlogId()}async fetchBlogId(){const t=document.querySelector(this.cssMap.bar.map((t=>`.${t}`)).join(", ")).querySelector(this.cssMap.avatar.map((t=>`.${t} a`)).join(", "));this.blogShortname=t.getAttribute("title");const e=await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/info`,{method:"GET"});this.blogUuid=e.response.blog.uuid}async queuePost(){const t="676933433577111552",e=await this.getReblogKey(t),n=await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/posts`,{method:"POST",body:{state:"queue",parent_tumblelog_uuid:this.blogUuid,parent_post_id:t,reblog_key:e}});console.log(n)}async getReblogKey(t){return(await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/posts?id=${t}`)).response.posts[0].reblogKey}onFormSubmit(t,e){console.log("********* FORM SUBMIT ********"),console.log({postId:t,queueCount:e})}initMenuButton(){const t=this.cssMap.postTypeButton,e=this.cssMap.icon,n=document.createElement("li"),o=document.createElement("button");t.forEach((t=>{o.classList.add(t)}));const i=document.createElement("span");e.forEach((t=>{i.classList.add(t)})),i.innerHTML='<svg viewBox="0 0 17 15" width="40" height="35" fill="RGB(var(--red))"><path d="M14.6 1h-2.7l-.6-1h-6l-.6 1H2.4C1.1 1 0 2 0 3.3v9.3C0 13.9 1.1 15 2.4 15h12.2c1.3 0 2.4-1.1 2.4-2.4V3.3C17 2 15.9 1 14.6 1zM8.3 13.1c-2.9 0-5.2-2.3-5.2-5.1s2.3-5.1 5.2-5.1c2.9 0 5.2 2.3 5.2 5.1s-2.3 5.1-5.2 5.1zm5.9-8.3c-.6 0-1.1-.5-1.1-1.1 0-.6.5-1.1 1.1-1.1s1.1.5 1.1 1.1c0 .6-.5 1.1-1.1 1.1zm-10 3.1c0 1.2.5 2.2 1.3 3 0-.2 0-.4-.1-.6 0-2.2 1.8-4 4.1-4 1.1 0 2 .4 2.8 1.1-.3-2-2-3.4-4-3.4-2.2-.1-4.1 1.7-4.1 3.9z"></path></svg>';const s=document.createElement("span");s.innerText="Bulk",o.appendChild(i),o.appendChild(s),n.appendChild(o),document.querySelector(this.cssMap.bar.map((t=>`.${t} > ul`)).join(", ")).appendChild(n),this.bulkButton=n}initUploadPanel(){const t=new class{constructor(t){this.onSubmitHandler=t}build(){return this.buildPanel(),this.buildHeading(),this.buildDescription(),this.buildInputs(),this.buildDescription2(),this.uploadPanel}buildPanel(){const t=document.createElement("div");t.setAttribute("style","\n\t\t\t\twidth: 100%;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tcolor: #000;\n\t\t\t\tborder-radius: 3px;\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t\tpadding: 0;\n\t\t\t\tpadding-bottom: 20px;\n\t\t\t"),this.uploadPanel=t}buildHeading(){const t=document.createElement("h2");t.setAttribute("style","\n\t\t\t\tfont-weight: bold;\n\t\t\t\tpadding: 20px;\n\t\t\t"),t.innerText="Bulk Post Queue",this.uploadPanel.appendChild(t)}buildDescription(){const t=document.createElement("p");t.innerText="Enter the post ID of a post on your blog that you would like to requeue multiple times.",t.setAttribute("style","\n\t\t\t\tpadding: 0 20px 20px;\n\t\t\t\tmargin: 0;\n\t\t\t"),this.uploadPanel.appendChild(t)}buildInputs(){const t=document.createElement("form");t.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementsByName("bulkQueuePostId")[0],n=document.getElementsByName("bulkQueueCount")[0];this.onSubmitHandler(e.value,n.value)}));const e=document.createElement("p"),n=document.createElement("label");n.setAttribute("for","bulkQueuePostId"),n.innerText="Post ID: ";const o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("name","bulkQueuePostId"),o.setAttribute("placeholder","Post ID"),e.appendChild(n),e.appendChild(o),e.setAttribute("style","\n\t\t\t\tpadding: 0 20px 20px;\n\t\t\t\tmargin: 0;\n\t\t\t"),t.appendChild(e);const i=document.createElement("p"),s=document.createElement("label");s.setAttribute("for","bulkQueueCount"),s.innerText="Number of times to queue: ";const l=document.createElement("select");l.setAttribute("name","bulkQueueCount");for(let t=0;t<10;t++){const e=document.createElement("option");e.value=t+1,e.text=t+1,l.appendChild(e)}i.appendChild(s),i.appendChild(l),i.setAttribute("style","\n\t\t\t\tpadding: 0 20px 20px;\n\t\t\t\tmargin: 0;\n\t\t\t"),t.appendChild(i);const a=document.createElement("button");a.setAttribute("type","submit"),a.innerText="Submit",a.setAttribute("style","\n\t\t\t\tmargin: 0 20px 20px;\n\t\t\t\tbackground: #001935;\n\t\t\t\tcolor: #fff;\n\t\t\t\tpadding: 10px;\n\t\t\t\tborder-radius: 4px;\n\t\t\t"),t.appendChild(a),this.uploadPanel.appendChild(t)}buildDescription2(){const t=document.createElement("p");t.innerHTML='The Post ID must reference a post from your blog. The post ID is the part of the URL after ".tumblr.com/post/". For instance, if the post is at the URL <strong>http://myawesomeblog.tumblr.com/post/12345</strong>, you would enter <strong>12345</strong> in the Post ID field.',t.setAttribute("style","\n\t\t\t\tbackground: #ccc;\n\t\t\t\tfont-style: italic;\n\t\t\t\tmargin: 0 20px;\n\t\t\t\tpadding: 20px;\n\t\t\t"),this.uploadPanel.appendChild(t)}}(this.onFormSubmit).build();document.querySelector(this.cssMap.bar.map((t=>`.${t}`)).join(", ")).after(t)}};await t.init(),t.initMenuButton(),t.initUploadPanel()}))})();