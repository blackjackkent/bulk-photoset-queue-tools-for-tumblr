(()=>{"use strict";window.addEventListener("load",(async()=>{const t=new class{constructor(){this.cssMap={},this.blogShortname=null}async init(){this.cssMap=await window.tumblr.getCssMap(),await this.fetchBlogId(),await this.queuePost()}async fetchBlogId(){const t=document.querySelector(this.cssMap.bar.map((t=>`.${t}`)).join(", ")).querySelector(this.cssMap.avatar.map((t=>`.${t} a`)).join(", "));this.blogShortname=t.getAttribute("title");const e=await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/info`,{method:"GET"});this.blogUuid=e.response.blog.uuid}async queuePost(){const t="676933433577111552",e=await this.getReblogKey(t),o=await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/posts`,{method:"POST",body:{state:"queue",parent_tumblelog_uuid:this.blogUuid,parent_post_id:t,reblog_key:e}});console.log(o)}async getReblogKey(t){return(await window.tumblr.apiFetch(`/v2/blog/${this.blogShortname}.tumblr.com/posts?id=${t}`)).response.posts[0].reblogKey}initMenuButton(){const t=this.cssMap.postTypeButton,e=this.cssMap.icon,o=document.createElement("li"),n=document.createElement("button");t.forEach((t=>{n.classList.add(t)}));const s=document.createElement("span");e.forEach((t=>{s.classList.add(t)})),s.innerHTML='<svg viewBox="0 0 17 15" width="40" height="35" fill="RGB(var(--red))"><path d="M14.6 1h-2.7l-.6-1h-6l-.6 1H2.4C1.1 1 0 2 0 3.3v9.3C0 13.9 1.1 15 2.4 15h12.2c1.3 0 2.4-1.1 2.4-2.4V3.3C17 2 15.9 1 14.6 1zM8.3 13.1c-2.9 0-5.2-2.3-5.2-5.1s2.3-5.1 5.2-5.1c2.9 0 5.2 2.3 5.2 5.1s-2.3 5.1-5.2 5.1zm5.9-8.3c-.6 0-1.1-.5-1.1-1.1 0-.6.5-1.1 1.1-1.1s1.1.5 1.1 1.1c0 .6-.5 1.1-1.1 1.1zm-10 3.1c0 1.2.5 2.2 1.3 3 0-.2 0-.4-.1-.6 0-2.2 1.8-4 4.1-4 1.1 0 2 .4 2.8 1.1-.3-2-2-3.4-4-3.4-2.2-.1-4.1 1.7-4.1 3.9z"></path></svg>';const i=document.createElement("span");i.innerText="Bulk",n.appendChild(s),n.appendChild(i),o.appendChild(n),document.querySelector(this.cssMap.bar.map((t=>`.${t} > ul`)).join(", ")).appendChild(o),this.bulkButton=o}initUploadPanel(){const t=document.createElement("div");t.setAttribute("style","\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 200px;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tcolor: #000;\n\t\t\t\tborder-radius: 3px;\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t"),t.innerText="testing",document.querySelector(this.cssMap.bar.map((t=>`.${t}`)).join(", ")).after(t)}};await t.init(),t.initMenuButton(),t.initUploadPanel()}))})();